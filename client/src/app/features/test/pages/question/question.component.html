<main class="question-container">
  <section class="question-box">
    <div style="width: 300px; margin: 20px">
      <mat-progress-bar mode="determinate" [value]="progressValue">
      </mat-progress-bar>
      <mat-radio-group [(ngModel)]="answer">
        <label for="options" class="question"
          >{{ currentQuestionIndex() + 1 }}.
          {{test()?.questions?.[currentQuestionIndex()]?.text}}</label
        >
        @for(option of test()?.questions?.[currentQuestionIndex()]?.options;
        track option){
        <mat-radio-button [value]="option" [disabled]="answered">
          {{ option }}
        </mat-radio-button>
        }
      </mat-radio-group>
    </div>
    @if(answered){
    <div class="correct">
      {{ correct ? "–í–µ—Ä–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä! ü•≥" : "–ì—Ä–µ—à–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä... üò≠" }}
    </div>
    @if(!correct){
    <div class="correct-ans">
        –ü—Ä–∞–≤–∏–ª–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä: {{test()?.questions?.[currentQuestionIndex()]?.correctAnswer}}
    </div>
    }
    <div class="explanation">
      {{ explanation }}
    </div>
    }
    <div class="navigation-buttons">
      @if(currentQuestionIndex() > 0){
      <button
        class="btn btn-primary"
        routerLink="/tests/{{ test()?._id }}/{{ currentQuestionIndex() }}"
        (click)="resetFields()"
      >
        –ù–∞–∑–∞–¥
      </button>
      }
      <button
        class="btn btn-success"
        (click)="submitQuestion()"
        [disabled]="answered"
      >
        –ü—Ä–æ–≤–µ—Ä–∏
      </button>
      @if(currentQuestionIndex() === (test()?.questions?.length ?? 0) - 1){
      <button class="btn btn-success" (click)="submitTest()">
        –ü—Ä–µ–¥–∞–π —Ç–µ—Å—Ç
      </button>
      } @if(currentQuestionIndex() < (test()?.questions?.length ?? 3) - 1){
      <button
        class="btn btn-primary"
        routerLink="/tests/{{ test()?._id }}/{{ currentQuestionIndex() + 2 }}"
        (click)="resetFields()"
      >
        –ù–∞–ø—Ä–µ–¥
      </button>
      }
    </div>
  </section>
</main>
